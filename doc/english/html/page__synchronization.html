<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Rsh API: Synchronization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rsh.bmp"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Rsh API
   &#160;<span id="projectnumber">SDK 2.1</span>
   </div>
   <div id="projectbrief">Programming manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="page__examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Synchronization </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Information below is mostly related to high-frequency devices with onboard memory installed (see <a class="el" href="_rsh_consts___caps_codes_8h.html#a7d002d179754641063bf0db5344f5866a5ed5faedf3212a6c617025124db414ce" title="RshInitMemory initialization structure is supported by abstraction library. ">RSH_CAPS_SOFT_INIT_MEMORY</a>). Such devices usually have additional capabilities to start data acquisition on some kind of trigger. Data acquisition parameters (and synchronization parameters) are changed using <a class="el" href="struct_rsh_init_memory.html" title="Initialization structure for Memory-type devices. ">RshInitMemory</a> initialization structure. <br/>
</p>
<h1><a class="anchor" id="page_SynchronizationStartTypes"></a>
Start data acquisition</h1>
<p>One can choose start mode for device (<a class="el" href="struct_rsh_init_a_d_c.html#a3efbcf323a21adb0ba6de43ed3b5871f" title="Data acquisition start mode. ">RshInitMemory::startType</a> field) and combine it with other parameters (prehistory, start delay, hysteresis) to setup different work scenaries.</p>
<p>Diagrams for different synchronization regimes: </p>
<div class="image">
<img src="Synchronization_EN.png" alt="Synchronization_EN.png"/>
</div>
 <ul>
<li>When no synchronization is used (<a class="el" href="struct_rsh_init_a_d_c.html#a3efbcf323a21adb0ba6de43ed3b5871f" title="Data acquisition start mode. ">RshInitMemory::startType</a> == <a class="el" href="struct_rsh_init_a_d_c.html#a052804ec71ccbe925a8b33359bd233eaadc54c54b5f08844cc75cd2d8eb1c31f5" title="Program start. ">RshInitMemory::Program</a>) data acquisition will begin just after <a class="el" href="struct_i_rsh_device.html#a47d6a77d7311d54deea8c02ad77e66fc" title="Start data acquisition or signal generation process. ">IRshDevice::Start()</a> call. <br/>
 <em>Data acquisition is not started instantly, because after <a class="el" href="struct_i_rsh_device.html#a47d6a77d7311d54deea8c02ad77e66fc" title="Start data acquisition or signal generation process. ">IRshDevice::Start()</a> there should some internal command be formed, sended to device and recognised by its firmware. That additional delay depends on operating system, device type (PCI, USB) and other factors.</em></li>
</ul>
<ul>
<li>When synchronization is turned on (<a class="el" href="struct_rsh_init_a_d_c.html#a052804ec71ccbe925a8b33359bd233eaab353bf3e1b6d2302905eb2f9d9cbcd13" title="Start data acquisition on external trigger. ">RshInitMemory::External</a>, <a class="el" href="struct_rsh_init_a_d_c.html#a052804ec71ccbe925a8b33359bd233eaaa85aaa4fbccb5d9ef642002a37203c98" title="Internal synchronization. ">RshInitMemory::Internal</a> или <a class="el" href="struct_rsh_init_a_d_c.html#a052804ec71ccbe925a8b33359bd233eaae840f4e9feb73bd6ea90b452c898b977" title="Use master device as start trigger source. ">RshInitMemory::Master</a>) <a class="el" href="struct_i_rsh_device.html#a47d6a77d7311d54deea8c02ad77e66fc" title="Start data acquisition or signal generation process. ">IRshDevice::Start()</a> command will switch device to trigger waiting mode, and actual data acquisition will start only when selected trigger will be fired.<br/>
 To interrupt trigger waiting mode (when there was no trigger for too long, for example) one should call <a class="el" href="struct_i_rsh_device.html#a58ed2025368f7aabe6db1ac49b56b553" title="Stop data acquisition or signal generation process. ">IRshDevice::Stop()</a> method.<br/>
 Additional synchronization parameters are prehistory size, start delay or combination of both of them.</li>
</ul>
<h1><a class="anchor" id="page_SynchronizationPrehistory"></a>
Prehistory</h1>
<p>Prehistory size can be specified in <a class="el" href="struct_rsh_init_memory.html#a5d1d5e6e543365407f7de3ca71cc5fac" title="Prehistory size. ">RshInitMemory::preHistory</a> field as integer value in range from 0 to 15. Specified data buffer (<a class="el" href="struct_rsh_init_a_d_c.html#a9169154ef3e721aa8eaa72a1df3f3451" title="Buffer size in samples. ">RshInitMemory::bufferSize</a> field) is then be split to 16 parts, and <a class="el" href="struct_rsh_init_memory.html#a5d1d5e6e543365407f7de3ca71cc5fac" title="Prehistory size. ">RshInitMemory::preHistory</a> field will determine which buffer parts are used to save prehistory, and which for actual data.<br/>
 For example, when <a class="el" href="struct_rsh_init_memory.html#a5d1d5e6e543365407f7de3ca71cc5fac" title="Prehistory size. ">RshInitMemory::preHistory</a> is 4, 4/16 of buffer will be prehistory data, and 12/16 - after trigger data. <br/>
 On the image below internal device work with prehistory is pictured: </p>
<div class="image">
<img src="PreHistory_EN.png" alt="PreHistory_EN.png"/>
</div>
<p> When device receive <a class="el" href="struct_i_rsh_device.html#a47d6a77d7311d54deea8c02ad77e66fc" title="Start data acquisition or signal generation process. ">IRshDevice::Start()</a> command, it start to write digital data to circle buffer. When synchronization event is triggered, data size equal to "history" size (that is (16-prehistory/16)*bufferSize ) will be written to buffer, and then all buffer data will be send to computer. To check if device support prehistory mode, check <a class="el" href="_rsh_consts___caps_codes_8h.html#a7d002d179754641063bf0db5344f5866" title="List of device and software capabilities (features). ">RSH_CAPS</a> flag <a class="el" href="_rsh_consts___caps_codes_8h.html#a7d002d179754641063bf0db5344f5866a6c7150b861a56ded470fb3f7742ea21b" title="Prehistory data writing is availible. ">RSH_CAPS_DEVICE_PREHISTORY</a>.</p>
<h1><a class="anchor" id="page_SynchronizationStartDelay"></a>
Start delay</h1>
<p>Start delay allows to delay data acquisition from trigger event. That can be usefull when one need, for example, track some event that is delayed from its course, and device buffer is too small to contain all data block from trigger to actual usefull signal. To specify delay one should use <a class="el" href="struct_rsh_init_memory.html#aea66679c9372b4e0fa831ea3db5b19c7" title="Start delay. ">RshInitMemory::startDelay</a> field.<br/>
 To check if device support this mode, check <a class="el" href="_rsh_consts___caps_codes_8h.html#a7d002d179754641063bf0db5344f5866" title="List of device and software capabilities (features). ">RSH_CAPS</a> flag <a class="el" href="_rsh_consts___caps_codes_8h.html#a7d002d179754641063bf0db5344f5866a72bc3e5be326765db46df01f989d8901" title="Data acquisition process can be delayed (from trigger event). ">RSH_CAPS_DEVICE_START_DELAY</a>.</p>
<h1><a class="anchor" id="page_SynchronizationHysteresis"></a>
Hysteresis</h1>
<p>To add hysteresis to synchronization search scheme one should use <a class="el" href="struct_rsh_init_memory.html#a87c7c94337fcefa2dbca2e84f603b88a" title="Hysteresis. ">RshInitMemory::hysteresis</a> field. This feature can be used only with digital sycnhronization (no analog comparator), usually only analog input channels of ADC device can make advantage of it.<br/>
 On the picture below is displayed synchronization diagram with hysteresis use. There is some user specified threshold, and front trigger is used. </p>
<div class="image">
<img src="Hysteresis_EN.png" alt="Hysteresis_EN.png"/>
</div>
<p> Without hysteresis any crossing of threshold level will couse synchronization event. It can be "false" events, due to digital noise. Turning on hysteresis (set value from 1 to 20 in <a class="el" href="struct_rsh_init_memory.html#a87c7c94337fcefa2dbca2e84f603b88a" title="Hysteresis. ">RshInitMemory::hysteresis</a> field) will prevent that "false" events to occur. <br/>
 To check if device support this mode, check <a class="el" href="_rsh_consts___caps_codes_8h.html#a7d002d179754641063bf0db5344f5866" title="List of device and software capabilities (features). ">RSH_CAPS</a> flag <a class="el" href="_rsh_consts___caps_codes_8h.html#a7d002d179754641063bf0db5344f5866a842258001468451ee1fd6850b26e1581" title="Device has programmable hysteresis for synchronization. ">RSH_CAPS_DEVICE_HYSTERESIS</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 30 2015 12:21:56 for Rsh API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
