<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Rsh API: Документация по программированию устройств ЗАО &quot;Руднев-Шиляев&quot;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rsh.bmp"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Rsh API
   &#160;<span id="projectnumber">SDK 2.1</span>
   </div>
   <div id="projectbrief">Документация по программированию</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Поиск');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Титульная&#160;страница</span></a></li>
      <li><a href="pages.html"><span>Описания</span></a></li>
      <li><a href="annotated.html"><span>Классы</span></a></li>
      <li><a href="files.html"><span>Файлы</span></a></li>
      <li><a href="page__examples.html"><span>Примеры</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Поиск" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Указатель</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Классы</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Файлы</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Функции</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Переменные</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Определения типов</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Перечисления</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Элементы перечислений</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Друзья</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Макросы</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Страницы</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Документация по программированию устройств ЗАО "Руднев-Шиляев" </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="MainSectionIntroduction"></a>
Введение</h1>
<p>ЗАО "Руднев-Шиляев" выпускает широкий спектр устройств для сбора данных, устройств цифрового вввода-вывода, осциллографов, генераторов сигнала и др.</p>
<p>Все эти устройства различаются по своим характеристикам, иногда очень значительно. Но, тем не менее, для управления всеми устройствами используется единый унифицированный интерфейс <a class="el" href="struct_i_rsh_device.html" title="Интерфейс используется для управления практически всеми АЦП/ЦАП устройствами ЗАО &quot;Руднев-Шиляев&quot;. ">IRshDevice</a>, который позволяет, используя сравнительно небольшое число методов, получить доступ ко всему спектру функций каждого устройства.</p>
<h2><a class="anchor" id="MainSectionSoftStructure"></a>
Структура программного обеспечения  ЗАО "Руднев-Шиляев"</h2>
<p>Иерархическая схема программного обеспечения (для операционных систем семейства Windows) приведена на рисунке: </p>
<div class="image">
<img src="RshSoftwareRU.png" alt="RshSoftwareRU.png"/>
</div>
<p>Каждое устройство использует системный драйвер, а так же несколько библиотек абстракции, одна из которых (самого верхнего уровня) реализует интерфейс <a class="el" href="struct_i_rsh_device.html" title="Интерфейс используется для управления практически всеми АЦП/ЦАП устройствами ЗАО &quot;Руднев-Шиляев&quot;. ">IRshDevice</a>.<br/>
</p>
<p>Загрузка объекта с интерфейсом <a class="el" href="struct_i_rsh_device.html" title="Интерфейс используется для управления практически всеми АЦП/ЦАП устройствами ЗАО &quot;Руднев-Шиляев&quot;. ">IRshDevice</a> осуществляется с помощью класса <a href="http://ru.wikipedia.org/wiki/%D0%90%D0%B1%D1%81%D1%82%D1%80%D0%B0%D0%BA%D1%82%D0%BD%D0%B0%D1%8F_%D1%84%D0%B0%D0%B1%D1%80%D0%B8%D0%BA%D0%B0_%28%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%29">фабрики</a>. Каждая библиотека абстракции верхнего уровня (dll файл, имя этого файла обычно соответствует названию устройства, например LA-2USB.dll) содержит статическую фабрику классов с интерфейсом <a class="el" href="struct_i_rsh_factory.html" title="Интерфейс IRshFactory - абстрактная фабрика классов. ">IRshFactory</a>, которая может быть экспортирована из dll стандартными средствами Windows API (<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx">LoadLibrary</a>, <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx">GetProcAddress</a>). <br/>
 Получив объект фабрики, можно вызвать метод <a class="el" href="struct_i_rsh_factory.html#a7a4f6ee79e1ae16b371ee9f5e246e8de" title="Инстанцирование объекта класса. ">IRshFactory::CreateInstance()</a>, и инстанцировать объект с интерфейсом <a class="el" href="struct_i_rsh_device.html" title="Интерфейс используется для управления практически всеми АЦП/ЦАП устройствами ЗАО &quot;Руднев-Шиляев&quot;. ">IRshDevice</a>, который позволяет управлять непосредственно устройством.</p>
<p>Для удобства работы был создан специальный класс <a class="el" href="class_rsh_dll_client.html" title="Класс для работы с dll. ">RshDllClient</a> для работы с динамическими библиотеками, который позволяет получить объект <a class="el" href="struct_i_rsh_device.html" title="Интерфейс используется для управления практически всеми АЦП/ЦАП устройствами ЗАО &quot;Руднев-Шиляев&quot;. ">IRshDevice</a> вызовом всего одного метода - <a class="el" href="class_rsh_dll_client.html#acb6fcca3a0de67f78cc9ccedde321841" title="Получение интерфейса устройства (IRshDevice). ">RshDllClient::GetDeviceInterface()</a>, а также содержит ряд других удобных методов.</p>
<h1><a class="anchor" id="MainSectionIRshDevice"></a>
Интерфейс IRshDevice</h1>
<p>Методы интерфейса <a class="el" href="struct_i_rsh_device.html" title="Интерфейс используется для управления практически всеми АЦП/ЦАП устройствами ЗАО &quot;Руднев-Шиляев&quot;. ">IRshDevice</a>: <br/>
 </p>
<ul>
<li>Метод <a class="el" href="struct_i_rsh_device.html#a2b02354ea4ee4638ac9685f546f5b7e8" title="Подключение к заданному устройству. ">IRshDevice::Connect()</a> - используется для подключения к устройству. </li>
<li>Метод <a class="el" href="struct_i_rsh_device.html#a4706cd2760eb548240eeb8f49041f964" title="Установка параметров сбора и настройка устройства. ">IRshDevice::Init()</a> - используется для задания параметров работы устройства. </li>
<li>Метод <a class="el" href="struct_i_rsh_device.html#a47d6a77d7311d54deea8c02ad77e66fc" title="Запуск процесса сбора данных или генерации сигнала. ">IRshDevice::Start()</a> - запуск преобразования (сбор данных или начало генерации) </li>
<li>Метод <a class="el" href="struct_i_rsh_device.html#a58ed2025368f7aabe6db1ac49b56b553" title="Остановка процесса сбора данных или генерации сигнала. ">IRshDevice::Stop()</a> - остановка процесса сбора данных, сброс текущей операции чтения, если она не была завершена </li>
<li>Метод <a class="el" href="struct_i_rsh_device.html#a8afa4c54b4302eca2d5827fe9d9c1468" title="Получение различной информации об устройстве и библиотеке абстракции. ">IRshDevice::Get()</a> - получение информации о статических и динамических параметрах устройства и программного обеспечения.<br/>
 <em>прим</em>. иногда этот метод используется и для управления (передачи параметров). </li>
<li>Метод <a class="el" href="struct_i_rsh_device.html#a5fe82265d052163e34a1ffab4fec1c6d" title="Получение (или отправка) буфера с данными. ">IRshDevice::GetData()</a> - получение (или отправка) буфера данных <br/>
 Подробное описание всех методов и параметров можно найти в <a class="el" href="struct_i_rsh_device.html">документации </a>.</li>
</ul>
<p>Следует отметить, что до момента подключения к реальному устройству (вызов метода <a class="el" href="struct_i_rsh_device.html#a2b02354ea4ee4638ac9685f546f5b7e8" title="Подключение к заданному устройству. ">IRshDevice::Connect()</a>) созданный фабрикой объект класса <a class="el" href="struct_i_rsh_device.html" title="Интерфейс используется для управления практически всеми АЦП/ЦАП устройствами ЗАО &quot;Руднев-Шиляев&quot;. ">IRshDevice</a> не обладает всей информацией о конкретном подключенном устройстве, так как многие динамические библиотеки поддерживают сразу несколько ревизий одного устройства (например, ЛА-2USB12 и ЛА-2USB14).<br/>
 Поэтому получение информации об устройстве (Метод <a class="el" href="struct_i_rsh_device.html#a8afa4c54b4302eca2d5827fe9d9c1468" title="Получение различной информации об устройстве и библиотеке абстракции. ">IRshDevice::Get()</a>) лучше производить уже после подключения. Исключение представляет собой информация, которая не зависит от наличия устройства в системе, например версия библиотеки абстракции (<a class="el" href="_rsh_consts___get_codes_8h.html#a89a326bf9f936379d19de8e46e4c56d5a8d074bad5c88dc0aa4b92f71cd7413d9" title="Строковая константа - версия библиотеки абстракции ">RSH_GET_LIBRARY_VERSION_STR</a>), путь к файлу библиотеки (<a class="el" href="_rsh_consts___get_codes_8h.html#a89a326bf9f936379d19de8e46e4c56d5a99746b3c5e26cb82afcd61541e829deb" title="Строковая константа - путь размещения файла библиотеки ">RSH_GET_LIBRARY_PATH</a>) и другая подобная информация.</p>
<p>Процесс работы с устройством (АЦП) примерно следующий:</p>
<ol type="1">
<li>Получение объекта <a class="el" href="struct_i_rsh_device.html" title="Интерфейс используется для управления практически всеми АЦП/ЦАП устройствами ЗАО &quot;Руднев-Шиляев&quot;. ">IRshDevice</a> (для этого удобно использовать методы класса <a class="el" href="class_rsh_dll_client.html" title="Класс для работы с dll. ">RshDllClient</a>)</li>
<li>Подключение к устройству с помощью метода <a class="el" href="struct_i_rsh_device.html#a2b02354ea4ee4638ac9685f546f5b7e8" title="Подключение к заданному устройству. ">IRshDevice::Connect()</a></li>
<li>Настройка параметров работы устройства с помощью метода <a class="el" href="struct_i_rsh_device.html#a4706cd2760eb548240eeb8f49041f964" title="Установка параметров сбора и настройка устройства. ">IRshDevice::Init()</a> и одной из структур инициализации: <ul>
<li><a class="el" href="struct_rsh_init_memory.html" title="Структура инициализации для устройств типа &quot;Memory&quot;. ">RshInitMemory</a> </li>
<li><a class="el" href="struct_rsh_init_d_m_a.html" title="Структура инициализации для устройств типа &quot;DMA&quot;. ">RshInitDMA</a></li>
</ul>
</li>
<li>Запуск сбора данных с помощью метода <a class="el" href="struct_i_rsh_device.html#a47d6a77d7311d54deea8c02ad77e66fc" title="Запуск процесса сбора данных или генерации сигнала. ">IRshDevice::Start()</a></li>
<li>Ожидание готовности данных - метод <a class="el" href="struct_i_rsh_device.html#a8afa4c54b4302eca2d5827fe9d9c1468" title="Получение различной информации об устройстве и библиотеке абстракции. ">IRshDevice::Get()</a> с параметром <a class="el" href="_rsh_consts___get_codes_8h.html#a89a326bf9f936379d19de8e46e4c56d5a1ee8707ed41d6ea6e8954156aaf9c192" title="Ожидание завершения процесса сбора и передачи данных. ">RSH_GET_WAIT_BUFFER_READY_EVENT</a></li>
<li>Вызов метода <a class="el" href="struct_i_rsh_device.html#a58ed2025368f7aabe6db1ac49b56b553" title="Остановка процесса сбора данных или генерации сигнала. ">IRshDevice::Stop()</a> (опционально)</li>
<li>Получение данных с помощью метода <a class="el" href="struct_i_rsh_device.html#a5fe82265d052163e34a1ffab4fec1c6d" title="Получение (или отправка) буфера с данными. ">IRshDevice::GetData()</a></li>
<li>...</li>
<li>Выгрузка библиотеки (<a class="el" href="class_rsh_dll_client.html#a5342cfba72517abb3ce330a12f8f5cc0" title="Выгрузка всех библиотек. ">RshDllClient.Free()</a>). </li>
</ol>
<p>Примеры работы с конкретными устройствами, реализацию основных алгоритмов сбора данных,<br/>
 генерации сигналов и работы с цифровыми портами, а также дополнительные примеры собраны в <a class="el" href="page__examples.html">каталоге примеров </a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Документация по Rsh API. Последние изменения: Ср 30 Дек 2015 12:21:34. Создано системой &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
